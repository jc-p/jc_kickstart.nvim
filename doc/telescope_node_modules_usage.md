# Telescope Node Modules 使用指南

## 简介

`telescope-node-modules.nvim` 是一个 Telescope 扩展插件，用于快速搜索和浏览项目中的 node_modules 目录。这对于前端开发者特别有用，可以快速查找和导航到 npm 包的源代码。

## 配置说明

当前配置位于以下文件中：

1. 插件安装：`/Users/pengjiecheng/.config/nvim/lua/custom/plugins/init.lua`
2. 快捷键设置：`/Users/pengjiecheng/.config/nvim/init.lua`

### 插件配置

```lua
-- Telescope 扩展 - node_modules 搜索
{
  'nvim-telescope/telescope-node-modules.nvim',
  dependencies = { 'nvim-telescope/telescope.nvim' },
},
```

### 扩展加载

```lua
pcall(require('telescope').load_extension, 'node-modules')
```

### 快捷键设置

```lua
vim.keymap.set("n", "<leader>sm", function()
  require("telescope").extensions.node_modules.list({
    search_dirs = { "./node_modules", "../node_modules", "../../node_modules" },
    depth = 2  -- 限制搜索深度
  })
end, { desc = '[S]earch node_[M]odules' })
```

## 使用方法

### 基本功能

1. 使用快捷键 `<leader>sm` 打开 node_modules 搜索界面
2. 输入包名或文件名进行搜索
3. 选择结果后按 Enter 打开文件

### 搜索范围

当前配置会搜索以下目录：
- `./node_modules`：当前目录下的 node_modules
- `../node_modules`：上级目录的 node_modules
- `../../node_modules`：上上级目录的 node_modules

搜索深度限制为 2 级，以提高性能。

## 高级用法

### 自定义搜索目录

如果需要搜索其他位置的 node_modules，可以修改 `search_dirs` 配置：

```lua
search_dirs = { 
  "./node_modules",
  "../node_modules",
  "../../node_modules",
  -- 添加其他目录
  "/path/to/other/node_modules"
}
```

### 调整搜索深度

增加 `depth` 值可以搜索更深层次的文件，但会降低性能：

```lua
depth = 3  -- 增加搜索深度到 3 级
```

## 故障排除

如果搜索功能不正常，请检查：

1. 确保 Telescope 已正确加载 node-modules 扩展：
   ```lua
   :lua print(require('telescope').extensions['node-modules'])
   ```
   如果返回 nil，说明扩展未正确加载

2. 确保目标目录中存在 node_modules 文件夹

3. 尝试手动调用：
   ```vim
   :Telescope node-modules list
   ```